# 记忆体结构协议

定义记忆体的存储数据结构，其结构为了尽可能多保存一些信息和快速加载，结构上包含标识头、索引目录树、分页页码、数据标签、数据块

---

记忆体文件 头部信息 一般包含 3位固定标识 8字节固定版本标识位、8字节版本号二进制、4位权限控制+36位空码、32位钥匙位等，实例结构如下:

### 记忆体文件头部信息 (File Header) 示例

| 字段偏移 (字节) | 字段大小 (字节) | 字段名称                        | 描述与用途                                      |
|:----------|:----------|:----------------------------|:-------------------------------------------|
| 0x00      | 3         | **魔数 (Magic Number)**       | 固定标识，例如 `4D4D4D` (ASCII "MMM")，用于快速识别文件类型。 |
| 0x03      | 1         | **格式版本 (Format Version)**   | 标识数据结构的版本，便于后续扩展和兼容性处理。                    |
| 0x04      | 8         | **版本标识位 (Version Flags)**   | 8字节的固定标识位，用于标识特定版本的功能特性或兼容性信息。             |
| 0x0C      | 8         | **版本号 (Version Number)**    | 64位的版本号，通常用时间戳或单调递增的序列号表示。                 |
| 0x14      | 4         | **权限控制 (Access Control)**   | 低4位表示读、写、执行、删除等基本权限。高28位保留用于扩展更复杂的权限控制。    |
| 0x18      | 4         | **保留区 (Reserved)**          | 保留为未来使用，通常填充0。                             |
| 0x1C      | 32        | **加密钥匙/校验和 (Key/Checksum)** | 可用于存储加密密钥的摘要或整个文件头的校验和（如CRC32），用于验证文件头完整性。 |
| 0x3C      | 8         | **文件创建时间戳**                 | 文件创建的64位时间戳（例如，自1970年1月1日以来的毫秒数）。          |
| 0x44      | 8         | **最后修改时间戳**                 | 文件最后被修改的64位时间戳。                            |
| 0x4C      | 4         | **索引目录树根节点指针**              | 指向索引目录树（B-Tree/B+Tree）根节点的偏移量。这是快速定位数据的关键。 |
| 0x50      | 4         | **分页大小 (Page Size)**        | 每个数据页的大小（例如4096字节），这是提高I/O效率的关键。           |
| 0x54      | 8         | **文件总大小**                   | 整个记忆体文件的总字节数。                              |
| 0x5C      | 4         | **总页数 (Total Pages)**       | 文件中共有多少个数据页。                               |
| 0x60      | 4         | **空闲页数 (Free Pages)**       | 当前空闲页的数量，用于空间管理。                           |
| 0x64      | 8         | **空闲页链表头指针**                | 指向第一个空闲页的偏移量，用于管理空闲空间，避免频繁分配新页。            |
| 0x6C      | 4         | **数据标签表起始偏移**               | 指向数据标签列表的起始位置。                             |
| 0x70      | 4         | **数据标签数量**                  | 文件中包含的数据标签的总数。                             |

